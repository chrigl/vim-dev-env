filetype off                   " required!

set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()
" automatically check of puppet files
let g:syntastic_mode_map = { 'mode': 'active', 'active_filetypes': ['puppet']}

Plugin 'VundleVim/Vundle.vim'
Plugin 'scrooloose/nerdtree'
Plugin 'scrooloose/nerdcommenter'
Plugin 'wincent/Command-T'
Plugin 'FuzzyFinder'
Plugin 'majutsushi/tagbar'
Plugin 'mileszs/ack.vim'
Plugin 'L9'
Plugin 'taglist.vim'
Plugin 'MarcWeber/vim-addon-mw-utils'
Plugin 'tomtom/tlib_vim'
Plugin 'garbas/vim-snipmate'
Plugin 'honza/vim-snippets'
Plugin 'vim-scripts/Tabular'
Plugin 'scrooloose/syntastic'
Plugin 'rodjek/vim-puppet'
Plugin 'jgdavey/tslime.vim'
Plugin 'davidhalter/jedi-vim'
Plugin 'hynek/vim-python-pep8-indent'

call vundle#end()

syntax on
filetype plugin indent on
autocmd FileType python set smarttab expandtab tabstop=4 shiftwidth=4 softtabstop=4
autocmd FileType yaml set smarttab expandtab tabstop=2 shiftwidth=2 softtabstop=2
set laststatus=2
set statusline+=%.70F%y%=%4l/%4L(%3c)

let g:UltiSnipsSnippetDirectories=["UltiSnips", "local_snippets"]
" Disabled 
" https://github.com/davidhalter/jedi-vim/issues/163#issuecomment-73343003
let g:jedi#show_call_signatures = 0

" handle zcml files as xml
au BufRead,BufNewFile *.zcml set filetype=xml

" handls sls as yaml
au BufRead,BufNewFile *.sls set filetype=yaml

" I like to use command-t for finding files
" http://www.vim.org/scripts/script.php?script_id=3025
" Do not know why it is not done automatically
" so /usr/share/vim/vimfiles/plugin/command-t.vim

" some settings
set hlsearch
" 256 colors
set t_Co=256
" enable ruler and line numbers by default
set ruler
set number
set relativenumber
set smartindent
set autochdir
" nice menu for find, etc.
set wildmenu
" enable mouse usage by default
set mouse=a
" ack-grep rules
set grepprg=ack
set showcmd
set cursorline

"colorscheme delek
colorscheme default
syntax on

" gray background misspell or syntax error, to avoid red on red
highlight SpellBad ctermbg=gray cterm=underline,bold guibg=#ffb6b0
highlight CursorLine ctermbg=lightyellow cterm=None
highlight Special ctermfg=blue

" keybindings
nnoremap <F2> :call ToggleMouse()<CR>
nnoremap <F3> :call ToggleLineNumbers()<CR>
nnoremap <F4> :NERDTreeToggle<CR>

" Functions
function! ToggleMouse()
  if &mouse == 'a'
    set mouse=
    echo "Mouse usage disabled"
  else
    set mouse=a
    echo "Mouse usage enabled"
  endif
endfunction

function! ToggleLineNumbers()
  if &number
    set nonumber
    echo "Line numbers disabled"
  else
    set number
    echo "Line numbers enabled"
  endif
endfunction
